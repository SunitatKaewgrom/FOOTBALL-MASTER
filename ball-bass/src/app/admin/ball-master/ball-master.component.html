@if (message!= '') {
  <div class="alert alert-{{status}}">
    {{message}}
  </div>
}
<div class="box">
  <div class="row">
    <h3>เพิ่มข้อมูลเซียนบอล</h3>
  </div>

      <div class="form-group">
        <label for="name">ชื่อเซียนบอล:</label>
        <input type="text" id="name" class="form-group col-6" [(ngModel)]="ballMaster.name" name="name" required>
      </div>

      <div class="upload">
        @if (ballMaster.image!= ''){
        <img src="{{this.imgUrl}}{{ballMaster.image}}" alt="image" width="100" height="100">
        }
        <br>
        <label for="upload">เลือกรูปเซียนบอล:</label>
        <input type="file" id="upload" (change)="selectFile($event)"/>
      </div>

      <!-- ปุ่มบันทึก -->
      <button class="btn btn-primary col-3" (click)="saveBallMaster()" [disabled]="ballMaster.name == '' || ballMaster.image == ''">บันทึก</button>
</div>

<!-- ตารางแสดงเซียนบอล ประกอบด้วย ID, ชื่อ, รูป, แก้ไข, ลบ -->
<div class="box">
  <div class="row">
    <h3>ข้อมูลเซียนบอล</h3>
  </div>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>ลำดับ</th>
        <th>ชื่อ</th>
        <th>รูป</th>
        <th>แก้ไข</th>
        <th>ลบ</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let ball of masterList; let i = index;">
        <td>{{i+1}}</td>
        @if (!edit[i]){<td>{{ball.name}}</td>}
        @else{<td><input type="text" [(ngModel)]="ball.name" name="name" required></td>}
        @if (!edit[i]){<td><img *ngIf="ball.image!=''" src="{{this.imgUrl}}{{ball.image}}" alt="image" width="100" height="100"> <label *ngIf="ball.image==''">ไม่มี</label></td>}
        @else{<td><img *ngIf="ball.image!=''" src="{{this.imgUrl}}{{ball.image}}" alt="image" width="100" height="100"><br><input type="file" (change)="selectFileEdit($event, i)"/>
          <button *ngIf="ball.image!=''" class="btn btn-danger" (click)="deleteImage(i)">ลบรูป</button>
        </td>}
        @if (!edit[i]) {<td><button class="btn btn-warning" (click)="updateBallMasterClick(i)">แก้ไข</button></td>}
        @else{<td><button class="btn btn-success" (click)="updateBallMaster(ball.id, ball)">บันทึก</button>
          <button class="btn btn-danger" (click)="cancelEdit(i)">ยกเลิก</button></td>}
        @if (!edit[i]) {<td><button class="btn btn-danger" (click)="deleteBallMaster(ball.id)">ลบ</button></td>}

      </tr>
    </tbody>
  </table>
</div>

